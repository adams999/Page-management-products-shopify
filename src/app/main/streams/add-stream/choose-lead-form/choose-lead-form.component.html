<div class="container-fluid container-body pb-0">
  <div *ngIf="streamDetails && streamDetails._id" class="edit-header">
    <h5>{{header}}</h5>
  </div>
  <div class="col-12 p-0">
    <div *ngIf="streamDetails && !streamDetails._id" class="row content-center">
      <div class="col-md-12 text-center">
        <create-stream-header-app></create-stream-header-app>
      </div>
      <div class="col-md-10 crumb-head col-sm-12">
        <stream-bread-crumb-app [crumbNumber]='breadCrumbNumber'></stream-bread-crumb-app>
      </div>
    </div>
    <div class="col-md-12 bg p-0 pl-3 border-style shadow-box">
      <div class="row description-text pt-4 pb-0">
        <div class="col pl-2 head-text"> Choose Leads Generation Form</div>
        <div class="col">
          <form>
            <div class="form-row search-form-row">
              <div class=" form-group mb-0 search-form mt-1">
                <div class="form-group mb-0 has-feedback">
                  <label for="search" class="sr-only"></label>
                  <input type="text" class="form-control" name="search" id="search" (keyup)="search($event)"
                    (blur)="filterKeys.search=''" placeholder="">
                  <span class=" form-control-feedback">
                    <img src="/assets/icons-simustream/search.svg" alt="">
                  </span>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="height-ch" (scroll)="onElementScroll($event)" id="client">
        <div class="loader-center" [hidden]="!errorMessages.noLeadsFound">
          {{errorMessages.noLeadsFound}}
        </div>
        <div *ngIf="searchResultMessage !='' && notSearchResult" class="col-md-12">
          <p> {{SearchResultMessage}}</p>
        </div>
        <div class="row ml-2 mt-3 mr-2 mb-3" id="grid">
          <div class="col-3 pl-0" *ngFor="let item of leadsForms ; let i = index">
            <div class="card mt-3" (click)="selectForm(item)" [ngClass]="item.isSelected?'card-selected':''">
              <div class="row">
                <div class="col-8">
                  <div class="card-body pr-0">
                    <p class="card-title">{{item.name}}</p>
                    <h6 class="card-subtitle mb-2 text-muted">Fields# {{item.leadsFields.length}}</h6>
                  </div>
                </div>
                <div class="col-4 pl-0">
                </div>
              </div>
            </div>
            <button class="btn btn-sign-in view-button" (click)="viewForm(item, content)" type="button">
              view
            </button>
          </div>
        </div>
      </div>

    </div>
    <div class="col-md-12 mt-3 pl-0 pr-0">
      <button class="btn btn-primary btn-w-100 content-right " (click)="associateForm()"
        [disabled]="errorMessages.noLeadsFound || errorMessages.noFormSelected || !streamDetails.leadsForm"> Associate
        Form <img class="ml-3" src="assets/icons-simustream/Arrow_Right.svg" alt=""> </button>
      <button class="btn btn-primary btn-w-100 content-right mr-2" (click)="goBack('selected')"
        [disabled]="errorMessages.noLeadsFound || errorMessages.noFormSelected"><img class="mr-3 reverse-icon"
          src="assets/icons-simustream/Arrow_Right.svg" alt=""> Go
        Back </button>
      <button class="btn btn-gery-transparent  btn-w-100 btn-cancel" (click)="goBack('cancel')">Cancel</button>
    </div>
  </div>

  <ng-template #content let-modal>
    <div class="modal-header">
      <h3 class="mb-0">Lead Form</h3>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <img src="assets/icons-simustream/cross.svg" alt="">
      </button>
    </div>
    <div class="modal-body">
      <div class="row pl-3 pr-3">
        <div class="col-12">
          <span class="description-text pl-0">Form Details</span>
        </div>
        <div class="col-6">
          <div class="form-group modal-group">
            <label for="">Name:</label>
            <p>{{modalData.title}}</p>
          </div>
        </div>
        <div class="col-6">
          <div class="form-group modal-group">
            <label for="">Display Name:</label>
            <p>{{modalData.title2}}</p>
          </div>
        </div>
        <div class="col-12">
          <div class="form-group modal-group">
            <label for="">Description:</label>
            <p>{{modalData.description || 'None'}}</p>
          </div>
        </div>
        <div class="col-12">
          <span class="description-text pl-0">Thank You Page Details</span>
        </div>
        <div class="col-6">
          <div class="form-group modal-group">
            <label for="">Title:</label>
            <p>{{modalData.formSubmissionModal.title }}</p>
          </div>
        </div>
        <div class="col-6">
          <div class="form-group modal-group">
            <label for="">Description:</label>
            <p>{{modalData.formSubmissionModal.description  }}</p>
          </div>
        </div>
        <div class="col-12">
          <span class="description-text pl-0">Form Submission Details</span>
        </div>
        <div class="col-6">
          <div class="form-group modal-group">
            <label for="">Email:</label>
            <p>{{modalData.formSubmissionDetails.email || 'None'}}</p>
          </div>
        </div>
        <div class="col-6">
          <div class="form-group modal-group">
            <label for="">End Point:</label>
            <p>{{modalData.formSubmissionDetails.endPoint || 'None' }}</p>
          </div>
        </div>
        <div class="col-12">
          <span class="description-text pl-0">Form Fields</span>
          <table class="table bg" id="grid">
            <thead>
              <tr>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of modalData.fields ; let i = index">
                <td style="width: 7%" class="img-scene pl-0"><span class="text">{{i+1}}.</span></td>
                <td class="pl-0" style="width: 40%">
                  <span class="text"> {{item.label}}</span>
                </td>
                <td class="" style="width: 15%">
                  <span class="text"> {{item.validation.isRequired ? 'Required' : 'Not Required'}}</span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </ng-template>