<div class="container-fluid">
  <div class="row mt-1">
    <div class="col-md-5 stream-header  col-sm-12">
      <h5>Orders</h5>
      <!-- <span class="description-text"> Lorem ipsum dolor sit amet, consectetur tempor. </span> -->
    </div>
    <div class="col-md-7 stream-statistics col-sm-12">
      <div class="row stat-area-header">
        <div class="col-md-6  stream-total-views border-style col-sm-12">
          <div class="card head shadow-box">
            <div class="card-body text-center">
              <span class="card-left"> <img src="/assets/icons-simustream/Card-eye-back.svg" alt=""> </span>
              <span class="description-text card-center"> Total Orders</span>
              <span class="card-right"> {{ordersCount}}</span>
            </div>
          </div>
        </div>
        <div class="col-md-6 stream-total-sales border-style col-sm-12">
          <div class="card head shadow-box">
            <div class="card-body text-center">
              <span class="card-left"> <img src="/assets/icons-simustream/card-dollar.svg" alt=""> </span>
              <span class="description-text card-center"> Total Sales</span>
              <span class="card-right"> ${{totalSales}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-12 text-center">
      <p>NOTE: Please visit your commerce system for details or to fulfill the individual orders.</p>
    </div>
  </div>

  <div class="list-streams-main row mt-3">
    <div class="col-md-12 col-12 col-sm-12">
      <div class=" bg pt-3 border-style shadow-box">
        <div class="row m-0 pt-3 pb-3 mr-3">
          <div class="col-md-2 order-q order-count-head count-item">
            <h6>{{orders.length}} {{orders.length > 1 || orders.length == 0 ? 'Orders': 'Order'}}</h6>
          </div>
          <div class="col-md-10 active-list-filters col-12 col-sm-12 p-0 text-right">
            <form>
              <div class="form-row float-right">
                <div class=" form-group search-form filter-margin-right mt-1">
                  <div class="form-group mb-0 has-feedback">
                    <label for="search" class="sr-only"></label>
                    <input type="text" class="form-control" name="search" id="search" [(ngModel)]="searchKey"
                      (keyup)="search($event)" (blur)="filterKeys.search=''" placeholder="">
                    <span class=" form-control-feedback">
                      <img src="/assets/icons-simustream/search.svg" alt="">
                    </span>
                  </div>
                </div>
                <div class="form-group filter-form mb-0">
                  <span class="dropdown filter  mr-3">
                    <button class="btn btn-secondary dropdown-toggle sortby" type="button" id="dropdownMenu2"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      {{currentValue}}
                      <img class="ml-2" src="/assets/icons-simustream/Arrow-up-down.svg" alt="">
                    </button>
                    <div class="dropdown-menu filter-menu" aria-labelledby="dropdownMenu2">
                      <button class="dropdown-item" type="button" (click)="filterFunc('Date created', 'createdAt')">Date
                        created</button>
                      <button class="dropdown-item" type="button"
                        (click)="filterFunc('Total items', 'totalProducts')">Total
                        items</button>
                      <button class="dropdown-item" type="button" (click)="filterFunc('Total amount', 'amount')">Total
                        amount</button>
                    </div>
                  </span>
                  <!-- </div>
                <div class="form-group mr-3  mb-0"> -->
                  <span class="dropdown filter">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <img class="mr-2" src="/assets/icons-simustream/filters.svg" alt="">
                      Filters
                      <img class="ml-2" src="/assets/icons-simustream/Arrow-up-down.svg" alt="">
                    </button>
                    <div class="dropdown-menu check text-center" #dropmenu>
                      <form class=" pr-3 pl-3 pb-2">
                        <div class="form-group">
                          <label for="" class="float-left">Status</label>
                          <div class="select-wrapper">
                            <select class="form-control " [(ngModel)]="filterKeys.status" name="filterKey"
                              id="filterKey">
                              <option value="" selected disabled>Status</option>
                              <option value="completed" selected>Completed</option>
                              <option value="pending">Pending</option>
                            </select>
                            <i class="fa fa-chevron-down"></i>
                          </div>
                        </div>
                        <button type="submit" class="btn btn-sign-in " (click)="applyFilter(dropmenu)">Apply</button>
                      </form>
                    </div>
                  </span>
                </div>
              </div>
            </form>
          </div>
        </div>

        <div class="search-results col-12 col-md-12 col-sm-12">
          <table id="table" class="table bg">

            <thead>
              <tr>
                <td>Order No.</td>
                <td>Date</td>
                <td>Name</td>
                <td>Email</td>
                <td>Items</td>
                <td>Amount</td>
                <td>Status</td>
                <td></td>
              </tr>
            </thead>
            <tbody>

              <tr *ngFor="let item of orders ; let i = index" id="print-section">
                <td width="7%" class="img-scene">
                  <div data-toggle="modal" data-target="#exampleModal" (click)="modalData(item)"><span
                      class="text highlight-blue cursor_pointer"> {{item.orderNumber}}</span></div>
                </td>
                <td class="">
                  <div><span class="text"> {{calculateDuration(item.createdAt)}}</span></div>
                </td>
                <td width="12%" class="">
                  <div><span class="text"> {{item.customerName}}</span></div>
                </td>
                <td width="15%">
                  <div><span class="text"> {{item.customerEmail}}</span></div>
                </td>
                <td class="text text-center">
                  <div><span class="text"> {{item.products.length}}</span></div>
                </td>
                <td class="text text-center">
                  <div><span class="text">${{item.amount}}</span></div>
                </td>
                <td>
                  <div>
                    <span
                      [ngClass]="item.status == 'completed' ? 'badge badge-light': 'badge badge-light pending'"><span
                        [ngClass]="item.status == 'completed'?'fa fa-circle active-circle': 'fa fa-circle pending-circle active-circle'"></span>
                      {{item.status == 'completed'? 'Completed' : 'Pending' }}</span>
                  </div>
                </td>
                <td class="text-center">
                  <button class="btn btn-link" data-toggle="modal" data-target="#exampleModal" (click)="modalData(item)" >
                    <img src="/assets/icons-simustream/print.svg" alt="">
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Button trigger modal -->
<!-- <button type="button" class="btn btn-primary" >
  Launch demo modal
</button> -->

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content modal-width">
      <!-- <div class="modal-header">
       
      </div> -->
      <div class="modal-body">
        <div id="printBill">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <img src="assets/icons-simustream/cross.svg" alt="">
          </button>
          <h6 class="customtitle">Order {{modlData?.orderNumber}}</h6>
          <p class="customtitle description-text">(For information purposes only)</p>
          <div class="row">
            <div class="col-md-6">
              Order Details<br />
              <span class="light-text">Date:&nbsp;<span>{{convertDate(modlData?.createdAt)}}</span></span><br />
              <span class="light-text">Status:&nbsp;<span>{{modlData?.status}}</span></span><br />
              <!-- <span>Payment:&nbsp;<span>VISA ****4106</span></span><br /> -->
            </div>
            <div class="col-md-6">
              Customer Info<br />
              <span class="light-text">Name:&nbsp;<span>{{modlData?.customerName}}</span></span><br />
              <span class="light-text">Email:&nbsp;<span>{{modlData?.customerEmail}}</span></span><br />
              <span
                class="light-text">Address:&nbsp;<span>{{modlData?.checkout[0]?.shippingDetails['address1']}}</span></span><br />
            </div>
            <div class="col-md-12 pr-0 pl-0 show_scroller">
              <table border="0" class="w100 p-0 pt-2">
                <thead>
                  <tr>
                    <td>Item Name</td>
                    <td>Item Id</td>
                    <td>Brand</td>
                    <td>QTY</td>
                    <td>Price</td>
                    <td>Amount</td>
                    <!-- <td></td> -->
                  </tr>
                </thead>
                <tbody>

                  <tr *ngFor="let prod of modlData?.checkout[0].lineItems ; let i = index">
                    <td width="" class="img-scene ">
                      <div><span class="text light-text"> {{prod?.title}}</span></div>
                    </td>
                    <td class="">
                      <div><span class="text light-text"> {{prod?.product_id}}</span></div>
                    </td>
                    <td width="" class="">
                      <div><span class="text light-text"> {{prod?.vendor}}</span></div>
                    </td>
                    <td width="">
                      <div><span class="text light-text"> {{prod?.quantity}}</span></div>
                    </td>
                    <td class="text ">
                      <div><span class="text light-text"> {{prod?.price}}</span></div>
                    </td>
                    <td class="text ">
                      <div><span class="text light-text">{{prod?.line_price}}</span></div>
                    </td>
                  </tr>
                  <!-- <td>
                              <div>
                                <span
                                  [ngClass]="item.status == 'completed' ? 'badge badge-light': 'badge badge-light pending'"><span
                                    [ngClass]="item.status == 'completed'?'fa fa-circle active-circle': 'fa fa-circle pending-circle active-circle'"></span>
                                  {{item.status == 'completed'? 'Completed' : 'Pending' }}</span>
                              </div>
                            </td>
                            <td class="text-center">
                              <img src="/assets/icons-simustream/print.svg" alt="">
                            </td>
                          </tr> -->
                </tbody>
              </table>
            </div>
            <div class="col-md-9"></div>
            <div class="col-md-3 mkcenter">
              <p class="light-text">Subtotal:&nbsp;${{modlData?.checkout[0]?.subTotal}}</p>
              <p class="light-text">Delivery:&nbsp;${{modlData?.checkout[0]?.shipping}}</p>
              <p class="light-text">Sales Tax:&nbsp;${{modlData?.checkout[0]?.salesTax}}</p>
              <p>Total Price:&nbsp;${{modlData?.checkout[0]?.TotalPrice}}</p>
            </div>

            <!-- <div class=""></div> -->
          </div>
        </div>
        <div class="text-center">
          <button type="button" class="btn btn-link" [useExistingCss]="true" printSectionId="printBill" ngxPrint>
            <div class="highlight-blue text-center">Print</div>
          </button>
        </div>
      </div>
      <!-- <div class="modal-footer">

      </div> -->
    </div>
  </div>
</div>